function [Y,Xf,Af] = MLinverse(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 03-Aug-2018 13:07:31.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 40xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-54.5431004076857;0.0272591847341772;9.88240864853446e-06;4.0504797307406e-05;-47.9895447498484;0.00341071900532491;2.61463377471746e-05;2.47688303952351e-06;-44.734627991229;0.0173569510471801;5.69166789208495e-05;5.7270795528053e-08;-47.3006397094675;0.00294708307070013;3.13515648310557e-06;0.000361974854669706;-41.241760866089;0.00998683018885141;2.77393742657931e-05;7.81278705384214e-07];
x1_step1.gain = [0.0145461894160441;0.0120496516598144;0.0150741231249022;0.0148630982981727;0.0170326277881388;0.0139327839788853;0.0158142623094674;0.015416547835459;0.0143220888382999;0.0104822416804629;0.01545275445276;0.0174997027282986;0.0143444015654816;0.0103259149958399;0.015784537360079;0.0145613611304411;0.0177885202842552;0.0130662383228639;0.0176478843814202;0.0134209454899449];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1354569567174259692;-0.9948304217078842715;0.095581357142628803336;0.47513358527466642567;1.0935310376091968987;0.43358375841484264601;0.57623914336737269704;-0.38931984525061075209;0.32341994624573955353;0.15116757328087682133;-0.35175250261276258534;0.37897287344001107101;-0.23505095942669232412;-0.99701836989298175951;0.58383203978151609892;0.49386375696104090061;0.71162232168747807659;-0.17396939265739008729;1.2417883005962309095;-0.42663104915547994667];
IW1_1 = [1.0022612074968730855 1.077037109890907729 -0.19792231418883196592 0.66967670574228344016 0.15052497564334882396 0.70596258947425405417 0.30773316706093228889 -0.50477247688164827988 0.4380834467734852633 0.50519687067642393696 -0.4447564203805107752 0.82170164722878391572 0.64653288162519284565 0.56284219871149121506 0.5432175467839112093 -0.28910352820126494766 0.34792544258303320648 0.23854259085214452041 -0.85921187268625032196 0.065913948566471508572;-1.1805925309121221289 0.11461857332598100745 1.0904367426203969149 -0.18557038397495831394 0.002959752992869087683 -0.30658176260436131866 0.43381314355404393401 0.10168141906030614408 0.10828458077430053175 -0.76163940622900416777 -0.5478616727078281512 -0.19078543107260431677 0.4804577042775268203 -0.62838211321792281083 0.22769037163461156026 -0.58653011901901686009 0.46788603645362353278 -0.23086896724362224176 -0.15414593197376588729 0.6095031010394096338;0.42447404036180519382 -0.42680215520984310373 -0.5737755372462265413 -0.032599645672313180833 -0.79073624478161530504 0.04774127288808816677 -0.16927319135591742394 0.13484786884949129249 0.67583958137117061682 0.4143610274031825913 0.45150800430732812574 0.13621741923816546582 0.47548659209234095391 0.31021708410249176913 0.61777976786674504428 -0.18141170423522834376 -0.31834506300147297209 -0.60462553868438861926 -0.18005408699513886228 -0.55419149264560008117;0.48636307989825183773 0.32040696238177640565 0.23766319651922626632 -0.1964701158893152888 -0.21416872505252299019 0.35362021373229446386 -0.076930550550315529579 0.053714062331828536789 -0.25982892778436134096 -0.080182011650110560086 0.039130218686250002602 -0.39801888186241130008 1.5608611960476383995 0.56942354155660479531 0.18615877101674688232 0.38784658299107194201 0.045252950698475104263 -0.25084708345508205385 -0.13772500047189273342 -0.50128896613400730775;-0.21031392823963926397 0.52656401476341341272 -0.68857388192929447346 0.50599057152171278418 -0.15403694231244158264 0.23724959484991575698 -0.34900852134376952884 -0.34677111087651735222 0.34839823291246052595 0.82964883456338878176 0.41521440967931005916 0.40887414521650017329 0.25307830573997619483 0.48713589102356064098 0.086380279049709032813 0.047051633039733947728 0.091031310844056939624 0.53999709219796876436 -0.007047587028997770453 -0.24176562584669256117;-0.10713642647114618445 0.63654753551266862743 -0.15794984385198265753 0.61481020414053899614 -0.13739024220674564414 0.69167730189507103944 0.65493747951623337844 -0.24961196606838276235 1.0673443144540779581 -0.21531093362683562109 -1.0067462219179694749 0.58003206142177421434 0.10380122085972123824 -0.63011789476055823922 -0.49895381146181577714 -0.65041085487094785211 -0.10517019720949333239 0.25980784696644132481 0.33891204211164827065 -0.30878202125299397673;0.89522664925887229792 -0.18060622183406449537 -0.22188158412595421209 -0.43739458341293852017 1.1105333274784268127 -0.30763164081303367992 -0.17125789527156856651 -0.67379272723478489393 -0.1841516436667303136 0.34909569063148215839 -0.16565704399596387075 0.50377669129490265654 -0.13519853630487949081 0.67226944717463199552 0.046995461812256875134 0.60946093485001606727 0.86267940693789491036 0.84805867855252603515 0.56601870623522287929 0.018131306106854819943;0.73155985195079431538 0.31828352067416565419 -0.070829438781982348439 0.75524754970169538648 -0.43938401598469395415 0.30562402113576864204 0.40027965259392378483 0.28600640496666629442 -0.050713452712403926659 -0.13961747819251701941 -0.34022478697749164445 0.33234501335231969588 -0.42203689986848269555 -0.75065445442106915053 -0.24861933744365172227 -0.62975562549501207243 -0.99836731357033148271 -0.67879195415143489534 -0.044829190333968906013 -0.37767616879410942365;0.52248902200828306608 0.13943713122012907357 0.29881411262414803165 -0.36588390986885016565 -0.12915789741349631425 -0.4716774095578695758 -0.99296763268581611506 0.16526002422919838786 0.012242454897006718739 0.49378808426729359216 0.26592306467325932395 0.37356530803414489394 -0.37455955411820918144 0.19117605082813415862 -0.11889182284802038425 0.21358449991470696006 0.27046016753642393438 0.079984883980413701288 -0.53186118014078498373 0.24949564056760745179;-0.076029379322154519438 -0.30683261187677024484 -0.72417003568981386241 0.22186355237382235361 -1.0667312267668498382 0.89329555941393490315 0.28493000368533044631 0.57940282980934931789 0.090123620668125264954 -0.18380798643935869485 -0.43371400815773097914 0.11436019984902369429 0.64206327146458375132 0.036217455295195800924 0.52458701145869557347 -0.51030492760055434776 -0.41927188535511172862 -0.46134296600532559429 -0.17984551370827187022 -0.44793391227092110851;0.61834355081216585415 0.1233849132891124134 0.14297261753949352947 0.27577876173993604025 -0.26656731013906703742 -0.046048457966506854688 0.16106826562991863327 0.097458315845251261567 -0.059386102164530940595 -0.095676338386856366047 -0.18629330459775897411 0.21399864057582007604 0.21742699245148183751 -0.25624245821170504867 0.41539534526750049315 -0.56435186559609296086 0.13257914953363814092 -0.32642120544487296385 -0.58345568709332473745 0.36633299466063645733;-0.47366482178659025104 0.46273435667623380452 -1.4481600830676064628 1.7136354875468058356 -0.94629493516234364225 0.37864042688134730286 0.44410957371885645406 -0.34304088239902319479 -0.2615691787872375107 0.43182549020892357916 0.21998395499259523755 0.29644119346811259597 0.35890935849322813667 -0.091423419641304445871 0.39231711641332400742 -0.68498432957773713881 0.82767932433984903184 0.11622166867538753776 0.043016971537723491803 -0.19120151840973426127;0.70011298281648703945 -0.050309406904263144489 0.13219771293605850349 -0.015619237831715220358 0.48144774511675525464 0.28094255282133806517 0.69035254319111527543 -0.15803366223936210488 0.1638505380270653955 -0.48415594971551845216 -0.70194014041547070359 0.095400867120671403732 -0.33710536928439543969 -0.30004860857238963012 -0.10605843426272111574 -0.20486650810450907079 -0.31842431888376704352 -0.38082052567252050457 -0.65124095644684076856 0.27644050422166199787;-1.0269546841310275287 -0.66289463741780574324 -0.24707234193758023655 0.17580723389230790144 -1.231231321520778188 -0.52233863591549101191 -0.082419871342435377382 0.36809766474514210577 0.63573755446626967203 -0.39602414678390424063 -0.058063083044080206208 -0.13407206751595010519 0.54052302465813018006 -0.29409587762113537091 0.084233940414502869731 0.018332995265836045384 0.097605633984957931859 -0.96530514222075891606 0.52048969838305092495 -0.65631654055518262592;0.60394706320542890232 -0.3596406129070627844 -0.46947686704827801263 -0.41981284258240814111 -1.0115379177039469649 0.30244558510903102322 -0.32152614584923855379 0.14115051811545259453 -0.93096545800883956367 0.69422739998292604113 1.2138835529284985881 -0.48583368466587939505 1.373144532797533568 0.094755906939355413754 -0.42947412318438982215 0.2307221806638620476 -0.010726518279911844561 -0.36072102426442448353 -0.14531839682527289415 -0.68806913670461256061;-0.19214274851828549995 0.38288549995912701807 0.064288029210851777018 0.037457337036693322263 0.5903119470644713207 0.61407442231544395739 0.21721661362190303191 0.038892076061410256471 -0.30877370237738810399 -0.060405335472396563812 -0.7427549289651295128 0.51178858911639613094 -0.16727786905610567136 -0.15984214460700671423 0.11089117365103506874 -0.58070703921174482431 -0.0099981436144088962903 1.0612950429199012881 0.084334333169277270192 0.66386792266337146806;0.46051917509504819437 0.19763029999817763316 -0.44641606511757458975 0.14872388207675796279 0.15048953801316253265 -0.13211189705159634422 -0.27920402596176691068 -0.49190352635236250789 0.65980945810465918555 0.25343379585942626964 -0.39295904112737162217 0.53884250766033481295 -0.42523825883758736843 0.79354297903838988404 -0.51591657521598022207 1.2304128386666637329 -0.47185303753574658892 0.038564518961212192194 1.4664801474554618466 -1.5973886982277194502;-0.36056626641358113794 -0.049284765510606162731 -0.82559083231129037905 0.88408499517002581136 -0.95892667237371786992 0.29969204293040074827 0.26362761855143140854 0.22566833166825614465 -0.037749768588334564612 0.2143284956896665816 0.45608555834340147594 -0.078191960441408525639 -0.14456840844776180921 -0.33693183740395854509 0.21491094137047625501 -0.58426688443789442928 -0.19988096228427260082 -0.32028800349354408228 -0.42352115067492768219 0.12065361312491215684;-0.25763948997537861052 0.46054885044747823075 -0.77166490277819232979 0.39498391954304273854 0.37373638264769931672 1.2224971559802539911 -0.056166473663776382563 0.32919006828094971029 -0.58984658200470496681 0.60444558057555874964 0.82597123894649926434 -0.50086049470833371444 0.96592883835985821062 0.63617200639361892733 0.37399086531355912877 -0.08405551853403366025 -0.51081405962807213683 0.15558539122679657107 0.076918699893537195722 -0.80917080973356958484;0.60006789657717751751 -0.18510644036063053641 0.33807569776955848084 -0.24079656039262931078 0.38410143639930499626 -0.88577957124656736543 -0.56838411865790638977 -0.055574802622098733174 -0.6452558763799197683 -0.1061707522901445544 -0.92288229192697801562 1.065286152899558747 0.21909376777912528689 0.64386720383192608264 0.70880699579144235134 0.47264674421934654847 0.08857074033231521204 -0.099143069829261729065 0.033712100660409555219 0.18533563761017518567];

% Layer 2
b2 = [0.036354571117195422225;-0.033243533349693925316;0.11892172464535072374;-0.51220934371259996265;-0.25351758125788670384;-0.097888706852095053179;0.45228390075856494956;-0.2800001037077682331;0.00067445332466079183694;0.029801123905972733141;-0.14572378935186672266;-0.25090539705923164959;-0.23981139776778676032;0.19029287169499981003;-0.067268108689412312029;-0.081360409764039284819;0.028135064641188364115;0.073944588802843769226;0.11535376002175116994;-0.24651315654365363317;-0.18346030856804049214;-0.092028427959830141902;0.28866982350626341214;0.1166838893114456599;-0.18806120250489929968;-0.21327384326894593958;0.018820570009658341842;0.061498739696736942628;0.16013711263523547346;0.12110948016471480282;0.094314682031385058125;0.049009114367067875551;-0.20233653157166522907;-0.3250125059712558051;0.26909810662579813911;0.016041060784099649139;-0.17076699373960244066;-0.18996459926996639433;0.028606910939808698896;0.14674515549469521747];
LW2_1 = [-0.005886141697725762699 0.24837296486107357518 0.34492734615668507736 0.18253423530325194046 -0.038987333048548789005 0.079047942235411117196 -0.22714152028656847682 0.16720988382093956992 0.25017674798269395886 -0.1214963845201334075 0.054294933435761062734 0.045650521454024817203 -0.15575584250405383191 -0.34036284036579739221 -0.1446465293390748752 -0.097745896840549892359 0.072267015922313090903 -0.39844508176203147221 -0.065301873957045591945 -0.098669444871274547548;-0.096505854719749442627 -0.24040127809077385668 -0.074452609176965070525 0.14782350627649779029 -0.021882402928475579856 -0.12781752139893132192 0.17889231319191967184 0.33842347256710531012 -0.010956837841458058266 -0.05932779704409522209 0.24160385671919298867 0.37607359192626610422 0.19540476193879327549 -0.16253133271316166919 0.13182667297650296767 -0.056680631516833092365 0.062550806610968096022 -0.12365015156440380129 -0.031921122175868003878 -0.052439370183839040251;0.14993624612381808991 0.20836151105829772701 0.2124911760790088866 0.019683873079057175037 0.053580702437963118046 -0.10533014951828334471 0.13102286642247520931 0.0021106323676079461263 -0.56620538751699667213 -0.22258982195287219108 -0.4963525315856694986 0.038664888739244313021 0.38337579288458339954 -0.19724168215025911222 0.040400690620736041947 -0.0082530741125021352123 -0.066888756279939717841 0.12960273863124727178 0.078192446645333729682 -0.046989902707324920916;0.1355376027024978447 -0.1790174195212782815 -0.31722494399590817071 -0.31061564237055433457 -0.10972885265081368245 0.13666984043263408211 0.076676329936776199681 -0.1268223521555026656 0.55556448840779526499 0.40058063744625715952 0.20292808572051160287 -0.17844529781699702831 0.049274147923912131608 0.16094268247702089858 0.044782642674467944277 -0.047175683098873440191 -0.17054194805111363986 -0.42828203518677893102 0.60888169800031410883 -0.32741320520175820619;-0.011424296170051551416 0.003451928908015914569 0.11346348087172788976 -0.1504886959466112395 -0.098312615168543074362 0.24286810030777278291 -0.0020074148915211705892 -0.037977788016383393077 0.46831213025534257355 -0.087613306937739207636 0.059936562204969394407 -0.071301420571114063063 -0.39156503826069422036 -0.023313911762304021652 0.0534834898230555425 -0.18387866848508779838 -0.053667681218642425411 0.14134518579825769424 0.28358484827124263994 -0.28472084790082363703;-0.087184266901836282582 -0.10868260300180943023 0.66172786782840131714 -0.14842110373525413403 0.44315505624416084984 0.39615434273218474992 -0.11383745099914235888 -0.19100226176439161208 0.072479063991002928846 -0.12265717914346623008 0.087646970951373553982 -0.084299836885860068847 0.32557521444974524272 0.094489298149631861801 -0.26250848842092117108 0.22994774747012519667 -0.10949817476507370251 -0.27725489353160448491 -0.0072540756181823816059 0.047151916741465210725;-0.24539474003536060343 -0.10892983537981115738 0.15194017535634993243 0.2503519684605717277 0.063983157571875115543 -0.039019384934511930352 0.075840139556569458046 0.046229812789336771628 -0.24330685718926320371 0.34873469050770372624 0.71249393526389626086 0.10460271379816581117 -0.34050171608035639803 -0.010409451844837411955 -0.31460612041969815422 0.003829011301791685612 -0.16983162975187859889 -0.3366803895458914675 -0.008943453727563697303 0.12196885755724273803;0.16759398957322593771 -0.066297959493802086084 -0.22197187694844161543 0.65798803321318888315 0.31065987847857606807 0.044235840755004744718 -0.17139538720292815666 -0.13571944928510298878 -0.014085685534457128426 -0.022934590338819654115 -0.87462520664982068563 -0.021491584214842793937 0.21168793977863317735 0.036280015226129384842 0.17699024338598109973 0.076312008551933818712 0.016403157523365633624 0.10219723340783896937 -0.18259372969848650103 0.11755423826362822182;0.013546771375318978139 -0.081138600072929015217 -0.16712343345302621556 -0.27919996453059015007 -0.22176937841045929467 0.064579101174657413398 0.14074063333041228474 0.077362684640140011449 0.050154974398877380515 0.05275360981384979997 -0.10945659024729917363 0.26651320107029519146 -0.22025587842085170287 0.062125858016459853395 0.19278727504246948032 -0.024064626075637449848 -0.027180125744001040755 -0.38829178519275797665 0.10013796126279224386 -0.087111399779670556365;0.15050774286425758208 0.17998132191959745341 0.037754900712733678592 0.18401960888943783012 -0.14924651272210306963 0.3028150494294341577 0.17872947323260557351 -0.36996623410487877726 0.40928371417133124766 0.049241603553055499076 -0.21905985426749308154 -0.052195094523382223883 -0.040888598301080200659 -0.018010849008754669515 0.06877061140445828169 0.17906014689351740232 -0.20888800851799346758 0.34874551823070343293 -0.092417946815319437781 -0.028298285637517520824;0.30374283280217900804 0.21171977624252583117 0.50857827878721040271 -0.1463244030976486032 -0.48033039100836300017 -0.23044055935188326178 0.32457272439488171756 0.25927703034878935018 0.25343590217883066318 0.10745515481815698378 -0.68253582267228851688 0.30267999712963422621 0.093680000125021201107 -0.33584993580653332845 0.055868085879856158038 0.066760132676420419484 0.035631963870448098153 -0.073866323690702700988 0.012430882504644790235 -0.1717013177931456247;0.0067286123107171249072 -0.67550132964248987832 0.28504473006708841432 -0.35548160423925256879 -0.3118604933353564812 0.59250686145673214789 -0.4739865832653684663 -0.3497769282949976799 0.11625720301067773987 0.256300728764328134 -0.43025962157327901636 0.4612768782719268712 -0.25212361159615381823 -0.32337565429901976577 -0.56585494828729143713 -0.71828164574583897029 -0.64258273225207729329 -0.74272269947089275544 0.15041180922712726886 0.11861946870070749771;-0.32601229092590372494 -0.25533795453679009047 -0.25858235925129230415 -0.16363798047463423702 0.59900815303381482746 -0.077861868594405234112 -0.11571550664801158459 -0.14179930939961210568 -0.14613209067006574515 -0.40533177987872565096 0.76076435214618776115 -0.2104697840002484055 0.66293493623264598824 0.48436400065576068474 -0.02103809113448232293 0.15828905015727437466 0.079561022459497671155 -0.094834124130356786675 0.28334032042430901122 -0.08048242685944544117;-0.06556607199844231848 0.10085713295319263805 -0.08468603431703586315 0.0080906144608358133985 0.43296663376548899516 -0.8033361392124676037 0.30827913206666923696 0.32255262826476188698 -0.21603834152311190975 -0.40341095864019838046 0.70423546364033173806 0.020376009311255015299 0.81825178091375050382 0.84465961351917095978 0.22362370427171099352 0.72394661615053224057 0.21371254140095521934 -0.34143668713363500844 0.11358290806071806578 -0.32250323811349035363;-0.062558446185900062897 0.31723268520844688512 0.36542048716063391112 0.021205900266260763187 -0.77373893353351508306 0.29656564871237256487 0.19647364184223545247 -0.14106151635239316811 0.54183752471673363171 0.0025104123438658490497 -0.20779374718156293222 0.43386461337345350042 -0.28288272359019706048 -0.38412420042715023083 0.22305842159725128293 0.12925299669690515358 0.27301744595578814057 0.0031436416421128919076 0.13978110263110021805 0.025549979532447052166;-0.19357083840868677393 -0.17574049258771093363 -0.2992703221901092947 -0.083927408964407146374 -0.033107070293276634476 0.67020448602698778906 -0.34544588936001696666 -0.18130766629586514416 -0.11104960921534864915 0.60563088151169408579 -0.11060044393924078898 -0.23416681941029363068 -1.0385465530639714782 -0.76433167638231991337 -0.1682440866318138939 -0.99613496907135690162 -0.32898024402751668838 0.19830537072847431723 -0.099912050951403943988 0.38541984713465282653;-0.073114198014932477165 -0.39013357264929965362 0.10087756545190143531 -0.14242602266383802556 0.097749682548915292624 -0.029488141818344016515 -0.44417917928749300893 0.0026180120299479471904 -0.2356101376841941708 0.19934401790935366017 0.21114293339231471336 0.11930596994793547794 -0.3327617145210411409 -0.01457603580994535665 -0.29014838114412094816 -0.096163862940382913158 -0.21433206665940629509 -0.56473299887628469751 -0.22855436761091191267 0.028071296010600765847;0.21354337608917658975 -0.034022355609422398615 0.54503195569662765685 -0.085379495826159973459 -0.048324194670217937575 -0.55832974631353560202 -0.28379670456476546736 -0.063349174760955251351 -0.030922715363947608086 -0.10825751067951581985 -0.12601896505838450224 0.43036096639033272204 0.36179298455398445356 -0.040915430283691378577 0.028985771162167286996 0.70283359089323793611 0.3219969862304899455 -0.46027971807813083949 -0.32909230686299606461 -0.30776022350403592354;0.047492442127532841223 0.31264635898329645736 0.0037161182144557652375 0.14985729856141805083 -0.45351206990830955634 0.025835417624474898285 0.27070449434533716548 -0.088993480977686556521 0.35989682493678065711 -0.40114029896823327759 0.11288533494745472963 -0.20358454057994906927 0.21380122113058361299 0.14480395175012913955 0.24604034654468895371 0.43732176211729750781 0.45634300991470727604 0.85604838691881501855 0.31946164844979485498 0.15221698067910002794;-0.25141056852281190581 0.19650201455648175219 -0.14712523121814227722 0.010981842282416710149 -0.055445920286895447604 0.41710739664924334491 -0.11824860905919286347 -0.24464407802128418368 -0.045087795028422805732 0.14233418618933840749 0.048561094570268449611 0.04214230853387440634 -0.084266995964324034607 -0.23755813995649258108 0.30774314897616561471 -0.40564765812583430948 -0.074039334034896819858 0.043802486886743728645 0.13224029524362468369 0.24412991643328071922;-0.18165891745530363122 -0.27439225851908533027 -0.017925188071295856257 -0.37567144863731560811 0.10439771771620821872 0.15930523107064986643 -0.51086487338163522054 -0.10999582774513866346 -0.18604110396896372803 0.34354079216978505862 -0.05194431477865383423 0.58821741534021720899 -0.36404961037888755593 -0.45208309750708725039 0.021501971534868009189 -0.57975869265398394248 -0.33106534381992569482 -0.95659308151274358156 -0.1071662054874837483 0.043787068929820968655;-0.075909126961925380006 -0.14868403340734712148 0.16000837864682146416 0.056549168951843177544 0.042261277484019005302 -0.22703765164811726129 0.091560729287805078802 0.048525315733982138378 0.17543033133540747448 0.074485887205789760857 0.32035277784780219479 0.077516399832039228901 -0.021633509257794288072 -0.040725950131228413897 -0.16416918349838582891 0.24040975481528931157 0.084558724256834222333 -0.33979565670998201909 -0.17930942730636195703 -0.43174814409344808297;0.34224013151903792673 -0.068237812174734374659 -0.071504776382190229911 0.40974215820659282139 0.29112810883000511675 -0.25562635068679512296 0.64115989553588004224 0.40338401227749448585 0.088852939945965173085 -0.43753283565870781935 -0.091272402598962146247 -0.66574247323859225833 0.5548761132817756625 0.9172161757880959998 -0.48666595774149135067 0.53221497856659039094 -0.11888597751094462374 0.75250974965324080035 0.086686755358195879961 -0.060769494067107597546;0.24798298612017666276 0.26453101124819805579 0.23366914162243712649 0.11884484831145766814 -0.48213675891904489434 0.29152265381892905616 -0.011952543455865756103 -0.018806843055105000595 0.10027046616243467936 -0.025708724444393954434 -0.85336332935417247292 -0.052860451634613010718 -0.17112400674975988824 -0.40856060302970514941 0.20952491787481244967 -0.053876550423536999357 0.079763475217442356135 0.64479516462547203925 -0.090228886209127889817 0.40985189810815048084;-0.63910784457575542383 0.38679509671923933967 -0.26565643084999013279 -0.1644185060371014806 0.57529736542539133826 -0.03509581846482113382 -0.50729936331776059877 -0.41712495248761344291 -0.51701851301275947304 0.68559415566680503851 0.10544139007391624407 0.21508601595123641448 -0.22525503002626481863 -1.1824774951342422735 0.53185149776294982082 -0.69045763294574036273 0.33053706070372806947 -0.085845495796929377486 -0.46386120422962129339 0.15541533319732048213;-0.12979313892546195941 -0.089594046141820898876 -0.16150412477313119686 -0.22237066644463543419 0.055023200384613821234 -0.2721434516114483726 0.26735354682071832411 0.32778376737813008646 0.19311031570712705596 0.2812935213702223991 0.53304079730278819405 0.43631361533085016857 0.023384233901953432877 0.11925713619541240818 -0.013641437716816971412 -0.18468428250425314441 -0.16524125443759501985 -0.93638343344290364545 0.12885856253359981305 -0.48540336206816009357;0.37700564324060598098 -0.36027763183736194463 0.25262088326854009734 -0.12171152320768349742 -0.59246731829165988348 0.16499112588611836161 0.36856576391907602819 0.21524595233533080907 0.59591941223177102849 -0.1872957868577671825 -0.078637577979500869474 0.21386544246213595732 0.0035135615825980515137 0.65369324919204430113 -0.35944652081139660815 0.2836467189488870444 -0.32332700157778138106 -0.41333192035241267392 0.4147489753500300802 -0.36755176465256794716;-0.055660079941237679269 0.081446209661474963659 0.45720092518005567284 0.010563006773159008822 -0.68768586062445535845 0.44662762557027108068 0.052320046527956791393 -0.27221591911979992062 0.23646391080855574951 -0.51856766070092208398 0.017787269557739234654 -0.16007408027945921325 -0.041313241690694571528 0.11163037311950679831 -0.35620786905079659945 0.10859830711985420104 0.2209391401017599954 0.51323661677149023941 0.40298181047648989894 0.088264269713541676499;-0.50998908669472975408 0.3876463609728734161 -0.097194705885105023291 -0.010562309660555728799 0.25152241050395984789 0.0052018126447539066171 0.13405051397191933282 -0.12014613204676823088 -0.30489068185601164718 0.020796843664654601075 0.97064934445643835659 -0.15276358859407543345 -0.024578311159918292406 -0.25346767040179335462 0.27753483773948600666 -0.20890261781031943533 0.36342050876946829785 0.1579700057796749324 0.093686348538422253851 0.012183639221102084138;-0.15378741929505707065 0.15481273194559913575 0.075051624674673633741 0.15371620059728044461 0.89297459951936308808 -0.48784753276440773195 -0.43872118596875631091 0.20837396804834706909 -0.60998927663305335667 0.62755663041843401384 -0.24444858404979596944 0.18169143637172391337 -0.18920781951136117494 -0.52519052989926762187 0.24825945707101612636 0.12807872288796276483 0.051291951941452015862 -0.47654225855147736013 -0.72667353727669248276 0.049974523872921075562;0.44370269222019670385 -0.33932122661076463688 -0.11122252066913054791 0.42980091733169517587 0.17966956652559193386 -0.16482228724586625579 0.052986557938460389361 0.74207869125550884881 -0.10697836340384725418 0.040116479689138478948 -1.0804595773427470018 0.12251801359000734359 -0.18036301706133547884 0.37252302379432744583 -0.31452815564020125683 0.0813493415572043993 -0.72992096794857552755 -0.38831923274734941876 -0.40491712359399306687 0.025109731618196882291;0.1501923863180007479 0.28033171194725442499 -0.27555337976274979495 0.18484320158459155437 -0.45112674129629060094 0.25301088835099844188 0.59770362149636235838 -0.015970744824515579335 0.17276181156227818358 0.050375398396921948485 -0.13760612353553716702 -0.42807873077568203701 -0.23501250831880382552 -0.193666033558652112 0.070654407877158958984 -0.27337318699668616828 0.067967409609238083057 1.0164880941422356209 0.071841229999366013059 0.051007152770016717103;-0.77183853111723521589 0.45552676832391314488 0.15688690684204936732 -0.34481223981109865306 -0.030021952453510736963 0.13578455298284622388 0.48654552523935468145 -0.10172499834810247443 0.25728573323982839582 -0.074228127777832761391 0.6676853828348968678 0.11103889447642853461 0.33545525135341414114 -0.34397268502455996542 0.2181596240010302834 -0.32337586501039167208 0.40608629140088259302 0.14386053767919315671 0.53983196442798853099 0.092254562720074761994;-0.35716569237387768565 -0.34975669441098616863 0.44295320171039720414 -0.54908971997069966342 -0.0052070009626550934831 -0.31581548189209246447 -1.0262909291470592166 -0.47034778302721613752 -0.50834055249077014782 -0.40740455936315922436 0.86035744713637940517 0.69076497622880195237 0.18939563101563841596 -0.33071962089634060478 0.5975198423243777146 0.33191238686696306059 0.26758740636765393495 -1.2702673328319140644 -0.030182270132602054963 0.0017917347918973130366;0.52871845526206462385 -0.76924960968499622727 -0.065476746932043236593 0.41479545224498465261 0.1906207106685932906 -0.23429401382458922565 -0.24354195391147265282 0.25644663957940488919 -0.31429669468806359367 0.057643152772142054741 -0.55310322065376671397 -0.15481932494526326471 -0.32626843422601753408 0.086937379341173057212 -0.62185226092485801352 0.12848588545653596982 -0.45522765764199174532 -0.22365394352642797848 -0.61708689091246438085 -0.27794162060287513905;0.59321455390428035059 0.15508980271229691472 -0.15650290612581177485 0.085169850803168356546 -0.099502561562491473324 -0.015326302555261669958 0.25803325164145712867 0.27823631033447943084 0.32045589990925993362 0.67709445007342949907 -0.78997002236503921502 -0.1549079942767987994 -0.26499236540884940627 -0.064667697650255026587 -0.38184660860997177156 -0.33204571048966458058 -0.17201149956159786369 0.24346704854783410288 -0.15086119059543237619 -0.24319477239029058113;-0.28089736956950639435 0.054658564798937603335 0.17947786592881526113 -0.13324057633245084409 -0.44155526320494858927 0.61160274049898766258 -0.077228678822175336749 -0.017188023461187872803 0.36619384628551315819 0.095740726643345222535 -0.41763600782978016479 0.37237248406804929202 -0.22069293013992549723 -0.31221609172451908476 0.0011196993114862292124 -0.4766933899254847673 -0.28415619626315646862 -0.2143877034338920462 0.32308262623706612837 0.46706451197085507854;-0.21450126960826529365 -0.94201844393438072256 -0.15571249873087633642 0.24820032655028365087 0.059942146625719117115 0.38543181887465283175 -0.28319689899134042887 0.046928891801591821054 -0.075684214678579983526 -0.41666688195939444173 0.057399324278843741332 -0.09013647966006992085 0.0018793956478231536953 0.55678648694091381621 -0.45618743678992190738 0.01272486934397195138 -0.56305755433142345989 -0.23343999716111110687 0.076745855065275134232 0.30837792335581376557;-0.52593055127074950228 -0.21676238247176959906 -0.35470321767252876999 0.11709177777554202748 0.79229007563266751202 -0.31511594658620178944 -0.57340481152272637644 -0.31149284899030915685 -0.67218303355602870841 -0.40973509458258206006 1.1733959870575894069 -0.42395998215233804407 0.14937686299822364178 0.16195044337064912199 0.57637613415385413607 0.59427113993297164818 0.45135049483161648887 0.21692770608032332924 -0.25925326563619671694 0.23161031955970698415;0.052860829033867705318 0.84678846171542521137 -0.15156599855238872543 -0.00244661006025337531 0.34014562355952054906 -0.67944550063435205089 0.18791295668030466581 0.16871496974357286236 -0.12784240361552653975 -0.1664741132767871834 0.36124530825038492221 -0.097428945823999218989 0.35993452200662456875 0.099269864501329352358 0.80553014655758004015 0.62314689297732916984 0.63378053337934125988 0.26968255125711820819 -0.10821562210701954343 -0.3055758468619371726];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.118125904495009;0.100993466065109;0.115393976503806;0.114483464366266;0.116352382883778;0.122432404995894;0.115838680830456;0.116784604844311;0.103045512250442;0.107534082519799;0.0974862054391822;0.10629794211576;0.112074670946324;0.120073955237808;0.110056148939689;0.0950608596655935;0.101530715623808;0.102921835625704;0.100753789832565;0.104036478095115;0.10128770596484;0.103810911012931;0.110824203290076;0.0935670051844216;0.105498437337562;0.119376431463673;0.101061832562449;0.101216845943279;0.0985385807358678;0.127079811220356;0.11330111956841;0.109693138324036;0.109188581264185;0.117172774487843;0.114658357818121;0.109694347932699;0.116459274877561;0.11036423921357;0.105530355976012;0.113980638174888];
y1_step1.xoffset = [-5.4125061763771;-8.2031972429277;-6.08612155173208;-6.07983186862474;-5.8125714493807;-5.64500402014879;-6.00900146767216;-5.40589652342108;-8.76333433955936;-6.39134697268441;-6.52437082288157;-6.71963131957238;-6.68166369153239;-7.44990982373458;-5.53485398532192;-6.91959148424741;-7.83675973932684;-7.18082293700851;-7.2952275759106;-7.79014185069925;-7.09379712805397;-6.71112277728522;-6.26564159372637;-8.83252706990011;-7.38053361715493;-6.72208105239008;-7.71349004062038;-6.81035958644899;-9.0626346248271;-4.88223380722957;-6.04086743900098;-6.11682088900162;-6.54208334397202;-5.45954134353834;-6.146569515558;-6.56476498387363;-6.94541866752679;-6.19511709651625;-7.00873424669901;-7.00088144184351];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
