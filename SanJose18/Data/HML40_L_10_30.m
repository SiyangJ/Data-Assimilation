function [Y,Xf,Af] = HML40_L_10_30(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 03-Aug-2018 09:43:55.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 40xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 20xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-5.4125061763771;-8.2031972429277;-6.08612155173208;-6.07983186862474;-5.8125714493807;-5.64500402014879;-6.00900146767216;-5.40589652342108;-8.76333433955936;-6.39134697268441;-6.52437082288157;-6.71963131957238;-6.68166369153239;-7.44990982373458;-5.53485398532192;-6.91959148424741;-7.83675973932684;-7.18082293700851;-7.2952275759106;-7.79014185069925;-7.09379712805397;-6.71112277728522;-6.26564159372637;-8.83252706990011;-7.38053361715493;-6.72208105239008;-7.71349004062038;-6.81035958644899;-9.0626346248271;-4.88223380722957;-6.04086743900098;-6.11682088900162;-6.54208334397202;-5.45954134353834;-6.146569515558;-6.56476498387363;-6.94541866752679;-6.19511709651625;-7.00873424669901;-7.00088144184351];
x1_step1.gain = [0.118125904495009;0.100993466065109;0.115393976503806;0.114483464366266;0.116352382883778;0.122432404995894;0.115838680830456;0.116784604844311;0.103045512250442;0.107534082519799;0.0974862054391822;0.10629794211576;0.112074670946324;0.120073955237808;0.110056148939689;0.0950608596655935;0.101530715623808;0.102921835625704;0.100753789832565;0.104036478095115;0.10128770596484;0.103810911012931;0.110824203290076;0.0935670051844216;0.105498437337562;0.119376431463673;0.101061832562449;0.101216845943279;0.0985385807358678;0.127079811220356;0.11330111956841;0.109693138324036;0.109188581264185;0.117172774487843;0.114658357818121;0.109694347932699;0.116459274877561;0.11036423921357;0.105530355976012;0.113980638174888];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.1489026356736187218;-1.0937834512284094757;-1.0811810250418101287;-1.169898223595815967;-1.1168669483004018961;-1.1064537362503532592;-1.0544842573737631675;-1.0977635316368514751;1.1873240475403634697;-1.2158310920438115676;1.0983752265453397001;-1.0708212404995089972;1.0519260396638014932;1.4366796535508374877;-1.0363142303430432634;1.2142709779426532624;-1.0775400782740334193;-1.1706832576342769414;1.0434606241810167049;1.867012833490311996];
IW1_1 = [1.1038413003757914232 1.3203547995905349222 0.078357452971498459116 -0.046649260533490555236 0.024858900819347076044 0.015496455074701603535 -0.022717606567267702861 0.021517365465666273006 -0.031409916281511525427 -0.010249038366671179776 0.0077409804642926578755 0.010456410558001213995 -0.00043824112453308628401 -0.0093259381940771664266 -0.00073216427247477461424 0.0024295037309031877575 -0.00085809426322161334345 -0.0021920310858637467692 -0.0017416799686649304859 0.0053672032383314145776 -0.0052664955991996919779 -0.022612490021191280348 -0.00067306013505206052812 0.0017589417206769234966 0.004259194775491990069 0.006297266246430855037 0.0061577488122905024368 -0.014159568657132835107 -0.010622534569757546147 -0.0020482232832770698276 -0.0042222027604593113936 -0.0033242341258209583826 -0.00089111720895086960013 -0.001003888838972087855 -0.0097435905375987674759 -0.0027774524041428972319 0.0093433637260117614887 -0.0050270419591580076807 0.010711612628568808678 -0.0041067095152861107094;0.021838902047153611191 -0.065183912736325871906 0.014532302634949770259 0.0039589302676636458495 -0.01357035195746308931 0.0033616521266100593719 0.88939222020870001284 -0.4343034223253912085 0.015382863458969360873 0.0069386341981796471196 0.00028095583126326356856 0.0063408208222296980061 -0.00081136344069969272563 0.0038730458846575528155 0.0015988415259246915347 -0.0064983531008694171011 -0.0070118870875738497153 0.0056434440470500687667 -0.0030298440234495420745 0.0090652379494608505139 0.0006581419633711086889 -0.0044796041185428464235 -0.0048290931722771357135 0.002166785271899841249 -0.008151943962240382896 0.0054437434811738715998 -0.0074447320209292781878 -2.7303220316725427142e-05 -0.0099130436573270155898 -0.0050517083377536898398 -0.0061870771452349126659 0.0037136020993135719984 -0.014147666417769990191 -0.00046895571193530412443 0.0034544066234228373684 0.00078748265835393836155 0.0034493311822038855846 0.0030631772705304112676 0.0066257757814198372376 0.0012683324706656913701;0.039441774618290362242 -0.026365995238785001897 0.034040104743278176702 -0.0068323448703823345257 -0.0049425132812651092346 -0.0065849144190777047017 0.61306437758573839591 1.5092749281339046252 0.042095800542639366659 -0.020638133791495594238 -0.0067287539742584496008 -0.0047513306308279192047 0.0032494457281123621806 -0.014492949157422269427 0.0081305187176093085544 0.0026036334000059360889 0.013062033011404069333 0.00047053376798825293729 0.014341674517962556962 -0.015150770338999532474 0.0039952205067005598302 -0.01203665917815599333 0.0039599330835107960508 -0.010798373359602875254 -0.00023977227343527430831 -0.0019467771909282181268 0.016933918438204718232 -0.0069878326998538183717 0.018303038003440783021 0.0039605487369645774043 0.0054948127103457049605 0.0011514027796194360037 0.0028613870727460647726 -0.0019654074479132518059 -0.0052283821834065540013 0.0043386528715606640511 -0.0052101314574622969999 -0.00036881692852251636225 -0.013429565098822196165 0.003105840056877099721;0.0054656579597441188809 -0.060383350438585052522 0.80170378254040586263 -0.90293385671713832785 -0.12523966824637633444 0.022050079839844863999 -0.03548806471332288659 0.025983672155401257159 0.0064360851285942318606 0.0052384347758070090584 -0.01213665455008987315 0.0083697807515030978737 0.00050074885400205914384 0.031241047797749766507 -0.0092310727694562260542 0.019654634394516083684 0.0023003433649526313157 0.019620156127315685479 -0.0074281093222431544831 -0.015576639076616083032 0.017143054135598842502 -0.033105143665055909719 -0.0019769268650348206275 0.054021752869152971088 0.014162665281431291095 0.023174923475668150752 0.0063962660479177221515 0.03134074597072843138 -0.027187738680554952159 -0.0074019631827375535066 -0.0094265991195739279318 0.008028192596105826126 0.029683971018393640745 0.0027425741972849824145 0.008768919954972489994 0.015255605203754199484 -0.0036248958872969572025 -0.023030790338974035242 -0.010754686998711888643 -0.0068626237013651916058;1.6937956133155442906 0.59945022508016376772 0.095802615675617555646 -0.078381317686957802104 0.019778424738336047861 -0.0095985383059643668985 -0.027481180896083621384 0.042460447106469623169 -0.044552017287507170162 -0.0042427087463185568506 -0.0026374938572879232448 0.011450524458778062534 -0.013381897783816411318 -0.010512992599604050956 -0.0094768739813970992447 -0.0044046198417136374001 -0.013807754562394771586 0.0051446699293584150295 -0.0055839707510446263961 0.0064500951367900734995 -0.0019765994752526886563 -0.013981232377599846911 0.0035480676623185700147 0.010214754026095089132 0.00020717348850574622034 0.0025307121806306081928 0.0056692840398686120129 -0.013510306234905044773 -0.006813623518114382549 -0.0046603104387363380318 -0.021701184238176157715 0.0096752750047431439195 -0.0075792989251930818068 0.0073360406079594486783 -0.012441972217705208822 0.018652256391896052806 0.002848434078135173627 0.0043693041484680261374 0.013675145611278905627 -0.0071150001925865099042;-0.034567128470581097444 0.0070539627172253437787 -0.0008726794199073674603 -0.0066616400854877634921 0.68172211665545623394 1.4712165165153827662 0.025416430542192787467 0.018245177192297592356 -0.043399380564073011812 0.031105795022101083436 -0.012825514638068715584 0.014566989677216580362 -0.013189712021533793115 -0.0049804912096149756354 0.0016495927991494643405 0.011903193812056029471 -0.0051916312998448307589 0.0060126271302128227181 0.015995816595885292005 -0.014193658243418859344 0.0093602421355926911095 0.00077765584045749757726 0.01938278828848673252 -0.0073895829275936429636 0.0025358927777300570988 -0.0039119400654991313276 0.017254261621423541001 0.0012445762086637727345 0.0064458431397979663174 -0.0029349475704338293287 0.0036053530812330068095 0.003384348623552867457 0.0031101599741884078214 0.028221482440395007779 -0.015899636068533815753 0.010085683891539205109 -0.0016749316060496943163 -0.00064138584375203401989 0.0016829335113742677557 0.0069447843281886002809;-0.0066965586205923527049 -0.043962294551690650479 -1.0099305578618764656 0.63617456425133755982 -0.10193798668411799269 -0.0027159804000815171779 -0.056598950023440328105 0.028417924291898981337 -0.010915622441705330123 0.016627879083548378208 0.014112268141769303623 -0.0087111380757874876113 0.018663802170258290275 -0.016367959682087419165 0.0071780080483285005344 0.0060640817502718973725 -0.01513624829380175521 0.0080577100270577284996 -0.010014778180060681864 0.0096712822706983385401 -0.017767418169960694924 0.030135322994837458049 0.0059113014452526436646 -0.01891604259424735715 0.0071839379686444897535 0.0041997379089159228224 0.0039647095990881595778 0.0037864562150464152468 0.010264722034373525289 0.0043797799675348971296 -0.005550662887501573578 -0.011612774210179267406 -0.021330742998163679941 -0.017714944662432535738 -0.0030892525243830333201 -0.010564128454237858151 -0.0080443433524710894478 -0.0027649887353535869579 2.9389780572162027723e-05 0.011594561870588130856;0.03342186354356568162 -0.052390463396940055441 0.7801704291497868482 1.5099776040781240916 0.028695261610950369841 -0.026731132733316557981 0.028510109466053284999 0.022265927406436354652 -0.021703493999658016872 -0.030826409212558875811 -0.0015955201941883101913 0.0049925489707365131725 -0.0087613360867513853658 -0.011908084401853244461 0.010746127351973592048 0.0011383793590638096281 0.01375628756888097777 -0.0065866984779922197954 0.0049106222446695753023 0.0027336735083809491492 -0.0071381462322514816626 -0.0065716891616014200955 0.010853277626299196248 -0.0041313848496729648971 0.0024725462854097955689 -0.010328556154701995159 -0.0015724615933112367702 -0.0035785684476896395534 -0.0040296553893041861527 0.016098458307551612168 0.0049210550175304021772 0.0076839046833501560563 -0.0036270039602373546454 0.0020054451443597856412 -0.011813966681968260039 0.013071182362495306975 -0.010201484326389889321 0.010750267386917099904 0.00084986821071832152358 0.001672952879866556903;-0.039254308122637214529 0.034201718299698515013 -0.032214097837235187993 -0.031870852061526094845 -0.037350053901089586006 -0.047924309944704049369 0.015951316696122340433 -0.01810522386630880956 -1.3430754023402224906 -0.84517625970902432453 -0.0027928283991363734955 0.014327252314628094801 0.0087123131414872882067 -0.0072973437577298350121 0.010307786929577324175 -0.0038407175054080283649 -0.0053912252406575862304 -0.0060879432344482448461 -0.0054703172188489924618 -0.0014117862322747460387 -0.001739976155646323153 -0.010920506299282536217 0.0036335848338091198718 -0.012738795943128289681 -0.0017800858949681202734 -0.0076195119007991521029 0.0078079735090523100238 -0.012651360201513923986 -0.015943690633177607513 0.0033647826202445108891 -0.026010771525703964974 -0.001177423050590006284 0.0023322000333577505744 -0.0042998099215882847751 0.0034223480695096163487 -0.00019226526126228801142 0.00058162319891874288483 -0.010559557076318271812 -0.0060262188532944453712 -0.0011206557208796031049;0.0016669850784753427117 -0.0096459741430289323155 -0.0038550259149196667088 -0.006150959662297996941 1.3771751503583131715 -0.32310664518894122166 -0.059587228014607529492 0.018027967803865535545 -0.041890446709514618517 -0.036478324775177588257 0.00128179374476574022 0.0078075321857306034801 0.0057358348907226444982 0.021071210228408337323 0.0080819265701736857366 0.0077126403168328990997 0.011909115932066815721 -0.008484047799139450563 0.0024651214563798928836 0.010705986921661024211 -0.008278379099628514412 0.00062773863018463047121 -0.010555426242609727144 0.0009742471826600429324 -0.0011816717620560354858 0.018130302771940234874 -0.013441931733546286926 0.0076737750281160180613 -0.0071487757560341801469 0.0051024247681986907924 0.0078218167730105658125 -0.0026001299623501714087 0.0027489572433070869409 -0.012308536662027006262 0.0082739550107553960778 0.0039659455764725157906 -0.0018153982534017247021 0.0016589342794316262047 0.0052346830484071051048 -0.0057411636365560974118;-0.043505036631501729782 -0.005530695394455731502 -0.019317758172390106508 0.0078262441031035686473 0.015215934233353951149 -0.0021530833106375422449 -1.1799129719748944201 -0.82346627851546660981 -0.087197516903600849614 0.023898889868003220932 0.013551124579796489794 0.0085689916299170783287 0.0026714385559357557015 0.013501411892468321088 0.0027832019344639032966 0.0056002731529992740706 0.002644010595184741793 0.0054302919528174233357 -0.0061452149966068486675 0.0065736560477187401877 -0.0059747009889872951596 0.0018892684567370992502 0.011439721985208406094 0.0073632256749204287247 -0.0049761472847253398685 -0.0054585348735529176309 -0.0032009171068461063532 -0.016227259159750328371 -0.0083431691204233684317 -0.0032445889562403742827 -0.0072963533138543767292 -0.00034511542670880902568 0.0061549110447701926505 -0.0028852738713553345053 0.0035500474728524331752 -0.0079662548299737345747 0.0058273129580224975604 -0.0032654018744377095486 0.010823832938401360335 0.0034310072319494976101;0.032110579721784208995 -0.080571489583574615323 0.027454900578291301094 -0.037818804692837972026 -0.04525181088729952894 0.0019130367714803846874 -1.0716431866146469698 0.2670672227105642671 0.024959137842126090379 -0.075873648233436050137 0.018890064305058445332 -0.0060939895375843418021 0.0018432572973304279119 0.0057388883064965262246 0.019722138134288250827 0.02665971292915075494 0.0027898415368204920739 -0.0033384027791917261947 -0.0055112443528175375507 -0.00213059881600107838 -0.010364684639648409636 -0.0042669717986510693683 -0.0083594176348207437782 -0.006431524932999040968 -0.0055317468398644684818 0.0016195076891523450639 -0.0034204335718801669869 -0.0060247852544034223229 -0.00071720076061868357452 0.010954208227087010655 0.019777073724095553531 0.0062686456080508724462 0.033111277207866940397 0.0022402887001020201953 -0.0091032119582111058892 -0.0057802369833832136295 -0.01255172343932265365 0.0059023661204303697059 -0.0065040146871886044336 0.014407104896621546544;0.63682471035586740715 -1.1358746898124132407 0.043498664978580084406 -0.023176545535059760172 -0.021645407653487849092 -0.017926181705921622606 -0.067635030567391049572 0.013424031514863956488 -0.031229450575765132364 0.028788978598005533771 0.0014788302029024504719 0.0085646097576107770022 -0.010885213044547965497 -0.0099829740010698303498 -0.00060260800036279109707 -0.011058820005588885713 -0.0050277067174594215759 -0.0033226070772296306677 -0.01648873262603805373 0.0085593742546467704857 -0.01241075571555988119 -0.0027165425351378994466 -0.019819789937855651629 0.011402809532280032412 -0.0069903782081094916617 0.0044586546542731628207 -0.0082243278786788519275 0.0071633164933172484637 -0.0018682481032251065014 0.0020865000884190305908 -0.00074653594676287707461 -0.0027062955888248925451 -0.0099989297782499871742 0.0029726680150821468279 -0.0052635670431409745454 -0.00036961694393365922967 -0.0015948076128309491336 0.013516728825768754146 0.0021652568253896701915 0.014859279034550157417;0.011679480493436989949 0.028379547546312184486 0.0058796679965022521225 0.0063439587669733192923 -0.050177582790668105728 -0.00047402658185890226466 0.031391036787213624781 -0.014940690093502432753 -1.3325166972273663202 0.69375922640610321324 0.0087799080509159549424 -0.00052596058406889037874 -0.0025170636644003567192 -0.0083612011088661716829 -0.015366121984531820599 -0.017030436179368210747 -0.0029533160323209745567 -0.01568493868134303651 -0.016999414934402448663 0.018698771923350048646 -0.0042460360729685365025 0.021207933289198194898 -0.0066637679036130985366 0.017197576290614548927 0.0015040374176881975664 0.0042770768535895457158 -0.0027481823457707926957 0.013356730309598233153 0.03295581189734606703 -0.009708690854552490257 0.030241482841082727856 -0.0085764871660455547359 0.0054303678091052274418 0.0062653650321234464343 0.0014962260880485227059 -0.00079258328773098088438 -0.0083407019753166961734 0.0047222466578665947892 -0.006572998926941947713 0.0010132260610659306246;0.32576750341511123699 -1.0832926052065838807 -0.013955085092331745433 0.046705101091805999169 0.01737029518233874914 0.045737149977928194533 0.099730654943864405215 -0.02265538207087976208 0.016279065799418634269 0.058944406802107864041 -0.0046162953497734440095 0.006234168096885281049 -0.0034844131978266279157 -0.0138146796110262364 -0.0018570487410508376962 -0.0083197330377638243487 -0.0022471783567323969436 0.011067571851261788496 -0.021273345301198200857 -0.0063489521754658464342 -0.0069016784380547388164 0.012132799251655473904 -0.016985593189153446597 0.01630046694890708095 -0.0064529276697393063433 0.0088187426619676552442 -0.0078645486052844673641 0.0035549472444026063676 0.021224833599528519085 -0.0088890115453739686896 0.0076410042312147095564 -0.0046120055285924404023 -0.011298595921264505473 -0.01271107683524796278 0.021551509100339781566 -0.01284328795928615409 -0.002866349153852478307 0.0030226294094586915462 0.0085275343734919472477 0.0094877592494368567094;0.034602839113323666242 0.060674685996053037695 0.011362033393114583102 -0.04520497247405839969 -0.040804812669772656808 0.031494232791729491472 0.05764483292272287035 0.050787677304427125691 1.5892685729880979828 -0.24970425717637614871 0.029552788347859647311 -0.055045457059650651499 -0.015078059732082345692 0.015753513380764340435 -0.0054693588676746245428 0.024617555089768667492 0.036430401201085621521 0.023885592869095809837 0.015103850726957437217 -0.003561478572953536044 -0.035712539523638432704 0.0037468772601131337431 -0.012472714193065320004 0.03403389390177477547 -0.018168849547072082884 -0.0098375489509215340023 -0.019986411882821839003 0.010021881324861314777 0.0084065487272620732784 -0.0043903581754550008096 0.010630675662925619801 -0.015238067978551983472 0.012661763832956833206 0.029318497674087749816 -0.023047636322345212839 0.010290499855067801113 0.011933888228124224506 0.023220004952544840565 -0.022208971501731393505 0.0059428299676979462474;0.025427747379663901556 -0.026338010378908448261 1.536659609523723935 0.80543557387270237058 0.0921494806503375119 -0.004799244527830195603 0.030334538560410170827 0.050917662549660264171 -0.017159325724367194277 0.012369425719148804607 -4.7465259831959015664e-05 0.0075994044210101075604 -0.010345905054325118047 -0.011562265121567383286 -0.0030910031255444968268 -0.0012442435109385424716 0.021637761763421029665 0.0020760880566411381992 0.014068788614749987501 0.010918449020118441845 0.0029879636352951022792 -0.0024437984048832992606 0.015986237823519499485 -0.013868354017588220214 -0.008695551772459423831 -0.0029351445478842698444 0.0040157066827223170113 -0.01535480446966838719 -0.017726717468364655561 -0.003520274481952801772 -0.0056270836345717195615 -0.0060813776616168747913 0.0033445179895522417733 0.0053337254616252884401 0.0020585151266251655588 -0.00055088176913630675438 -0.0059944780922097859466 -0.0016169539533929376974 0.018099624366856574553 -0.0018100202761006899121;0.027604224767182300448 -0.028892657423261948468 0.024153446905234816217 0.0087991875712285713695 0.045864245014147278501 0.040236066889545459013 0.0018326580121720316419 0.0021040600405875234044 0.82225323277287176715 1.6012885025456389254 -0.011988478687349946386 0.012125064010428435526 0.0065650407813800017859 0.020985648275776570826 0.016911299991453816044 0.005996338264035411085 0.017342566687244622553 0.0020002299785560604707 0.0071800436600614088445 0.014222022347147688162 -0.013480953132072556397 0.015722886287427746688 -0.0020600201994966597235 0.0227839421230979014 0.0041207875909561640995 0.013347451135075046394 -0.0048166067851877179817 0.019284279802039144824 0.035825034733590117864 -0.014572308583888795783 0.033887473055371222785 -0.0075320650882358970019 0.012319015154265238604 -0.0014291529332942063974 0.010763226769145928241 0.0084911302009053127304 -0.0025697126033573237762 0.015260896965179128817 0.019183191752631768151 0.006011901188059129951;0.021280747072787261492 -0.0098613646904532718807 0.0081901430874739625243 0.00010253944373986366261 -1.1920686245255738278 -0.58617763656995880428 -0.031562249014294718741 -0.00064960104586367568066 0.015471627462475403408 -0.024172875672641508382 0.0062988548672988295407 -0.0012070355337402581195 0.0016280793624561418643 -0.0080745337062420215191 -0.0038893821595267696542 -0.0025344741534358327176 -0.0027677459476207200151 0.0038755887506097268409 -0.0042219241547435618772 0.010317240685504469253 -0.0085969162940435338988 0.0091344036906160636091 -0.0013716676662535063833 -0.0047967398844554597764 0.00062669686219346326314 -0.0037717845879129009018 0.00057640174511318267424 -0.0068559713007785632807 0.00020844137757729507823 0.0017484108397383790311 0.0031909242007848639261 -0.0064310394798450416787 0.0059900475440882753816 -0.0056185798725553841304 0.0035783857659164000804 -0.0051066307650101741555 0.0003920825354377230538 -0.0035801575198473188817 0.00079703766151076316498 -0.006519971899118250612;-0.015150265552968694704 0.12234687701227324463 0.074833534350614488995 0.1112100590541950651 1.3294926972731628823 0.19818692520210443031 0.020800909246712823153 -0.018083686908609113153 0.068589636057912947709 0.081555630207958529354 -0.012130359956460754628 -0.0057220245895440533662 -0.06538175496526277275 0.091852292165108179178 -0.045797089853210133648 0.042790883349559452609 -0.011609118306682897695 -0.058593903749377881929 -0.039013742832033251884 -0.049184160004332067029 -0.037715386779904214176 0.027768202624489080749 -0.035008247629858366134 0.02951051909311478566 -0.021785767065019046723 0.026640689433953534948 -0.064387605551687529526 0.093609419341862870612 0.018098533156561145974 0.050140610229469854964 0.043334277354409464489 0.023770886666884157024 -0.018471024880252588651 0.0021593700572350498987 0.010093586940000261534 0.01655059336626392083 0.058103954035525547106 0.038973505838098283782 0.02406987805119299717 -0.0032277780440517359409];

% Layer 2
b2 = [-0.53231531108818241904;1.9479916040992297788;0.28416706082108600384;1.3684424915042256998;-0.7295282873942737778;1.9990270479528655656;0.91729647907341238522;0.4561255730755775506;0.11563150549714468207;1.5872643768867140679;1.8850590746422881683;0.057220450657297403096;-0.95768400794753993921;1.7421732255617017326;1.763346692638771751;0.30781876105129285515;-0.24110131544885010646;2.3003864783674159433;1.7489218356447044922;0.29494408874905431173];
LW2_1 = [1.2283487968802964119 0.080245179327676427472 -0.033151944693741573766 -0.049447823201633531176 -0.57171735925551847579 -0.066248695349319916548 0.096711815006465168265 -0.0099847415141247949227 -0.024209640408957521646 -0.046290951055126643154 -0.036760841251819421915 -0.07735313790484102392 0.74436688844069509585 -0.05041176260459440811 -0.67226451856283320208 -0.024853912835895067279 0.00358668134691814567 0.034345857402077267784 -0.095614688253560578546 -0.0087147096290040235167;0.44771545768742204707 -0.10400983570469374273 -0.020516696161523195058 -0.0043752369231865291879 0.7960496868967307238 -0.055252341384776859634 0.07964024215805369511 -0.046624088988810492851 -0.030585033038681208595 -0.038804740809838880744 0.036403716640265405824 0.048376227390892118096 -1.1788286321520036193 0.028059188394465073985 1.3341408597713793061 0.019200874062721889901 0.015234102063801616134 -0.060477268100384694305 0.0098864197858652969053 -0.020570691983777346368;-1.1162962543342629385 -0.088800910555166909233 -0.036515408587991529665 -0.036128619266926585707 1.9249733518835536739 -0.00088033440737883192611 0.10979954022019225435 -0.0043092403514332815531 -0.0541356153530486231 -0.020840114803107264579 0.024630286086829131925 -0.05017945047148901494 -0.4903618933385321399 0.0071393568020257846748 0.27420632622957136215 0.016510668145166631365 -0.0064287039382624408534 -0.044967365012502237553 0.013365691817525827273 -0.042177842208532233259;1.65318226468143048 -0.040871517774810364743 0.010543089310880604526 0.030143715731997387797 -0.9164545451788784769 -0.067416020737011903008 -0.010190829307835368514 -0.053226990571283099019 0.015704973109224334982 -0.027458451218297257046 0.020444827922167358586 0.10908329804490787818 -0.9698369620043815198 0.027731346962239281778 1.3746219072839418462 0.0075476999155120686608 0.025017707844656532357 -0.030290732630806147668 -0.0011166849793723856565 0.016504104177565800948;-0.056581341770088423859 -0.00921596114948435019 -0.022004628401247929015 -0.99930572638867587454 0.043557163284527515568 0.11946921396752409328 -0.71084317192159651722 0.18844674085385046403 -0.069388679285953477893 -0.050647419750267645699 0.028515299366037302059 0.073133686481774526356 -0.045439075631709784087 0.052689425738061249072 0.00037388684034530910404 0.0029259605104858636693 0.5014389556494415201 -0.05210338655698864424 0.15906691238313780401 -0.21071039068439073594;-0.013167603552393913544 0.0032274825916076758762 -0.027230656759340748918 1.3030325220486769222 0.025349450910978191254 -0.022719105555033276139 1.0966757027152078674 0.88042682495947988119 -0.058320388473337675395 0.0021789767290186215151 0.049971074126961410877 -0.10194876618116339995 -0.048860667707296696893 0.021624385051225006316 -0.081839030462860937187 0.019936737026017416902 0.61260760042280471005 -0.060136322577489409458 -0.022957124321301668191 0.15807273939527705098;-0.040907671315614707597 -0.0073701307942038440935 -0.057089388521167343249 0.66630705128239609003 0.02516600169902657308 -0.0015697436509726255937 0.91579619128817346674 -0.98870070694404654787 0.016181725696816307014 -0.021803719447539015447 0.0028818975473087690697 -0.037977373790545713994 -0.0051041957821737742734 0.0035132574739454055894 -0.057173782636234050936 0.04806447506991687324 1.8226677449891408589 -0.041806694002389566123 -0.012003460728152611642 -0.11853137344878669768;0.025359071207897872918 0.011842984557723059552 0.026031249037500862886 0.79263334823665887452 0.0037248040246842207754 -0.022953202634228644236 0.32130491554945289634 1.9380921992084294558 -0.080133692964469552256 0.024530415275477706477 0.052823526286824823428 -0.075084597771030853197 -0.050041937512875764305 0.019804235490991698582 -0.034037312102052776075 -0.025450780431025169653 -1.0987403674442455248 -0.025284018427729457873 -0.013059810515171287396 0.28938731416633678428;-0.045034839239165722069 -0.0096775480948098069334 0.053223595207300675169 0.0576040127814140962 0.066149911538638472841 -0.38742128481873322476 0.038671245573760545944 -0.0095643711197438922161 -0.078684256394462068207 -1.2001510188965722747 0.083082621845112433756 0.10199290163172776424 -0.021022201746304695902 0.017163195895098938559 0.02750274311526675064 -0.028004765890916938353 0.012995923488799547216 -0.093042648306621497656 -1.8609654877474728352 -0.079556976185346572894;-0.012076142169721242048 -0.04558381396640460298 -0.037981768428422602035 -0.054510701686168241964 0.015968446291668079301 1.2938620281363333309 -0.040033065069975747041 -0.015641941596549621685 -0.039940575141959575034 1.4136881745019471701 -0.01241402000640069031 -0.11655323922401673864 0.036774360861677221624 0.0053217081935569973336 -0.039699756248623228883 0.090776149541488646011 0.041085711279673288454 0.0066498959539360528309 0.70759705512019799301 -1.0973012963777843964;0.039434886906737923185 -0.03101828651623590033 -0.071862048366170092062 -0.024769397785218742747 -0.033363469632848627433 -0.17883477829362692813 -0.016534588607368515961 -0.0011685557133717325035 0.028016119972022499734 1.0946561597649977493 -0.097238776859241371486 -0.028507022593524687648 0.038829042033245358967 -0.019078458758634602582 -0.015661968667299110136 0.054101760922674747845 0.031346402284432063612 0.042782501378965838434 -0.96180026467153578729 -1.3948891183336766808;-0.065003438499817295382 -0.039964518127561833583 0.01858055582047224083 -0.062559846474350977452 0.064803037898688908847 2.359218734656793437 -0.047331942530837355088 -0.024805482076490782684 -0.09779530169273602247 1.1169069078120443805 0.090334092765469137243 -0.16192178717971425495 0.01637186113757778741 0.029563125487369522337 -0.047824572040160155673 0.089657841066047863632 0.03326777842949471542 -0.036466473224280038234 2.264428099976086628 -0.25332882913161758331;-0.0086919909331823683174 -1.3156502282228514922 -0.46751293214414874067 -0.021071911200372672041 -0.04131655684049949373 0.067400170898709185763 -0.012031495738669220966 -0.020115915162882139905 -0.01563446289874022635 0.072815804373840664621 -1.4749804728275717203 -0.49309764646920511977 0.079157826423691957096 0.073877037230354866693 0.0071662622279769841449 -0.05242514019261352437 0.012417201813837446325 -0.029328937841897828598 0.11241691684912019644 0.028359876575557042139;0.0036856285473848065734 1.6030854004731296403 1.082665648812073167 -0.068437805693925046757 -0.033035503083436154603 7.1288537849683599433e-05 0.0041670117115369144367 -0.023178635141531209879 -0.0064804420793225367067 0.0045856723610270631181 -0.046739999443653396094 0.89348510442352724326 -0.028545524725072424915 0.085002118489344552499 -0.13413588285906027919 -0.049733554984388361753 -0.018596418833262403497 -0.012529237564564772028 0.00083065874990335486841 0.11620034177395528741;0.027260005231970998313 1.5450479089083022366 -0.69122953821379717887 -0.034346002073466525006 -0.064288088250993954964 -0.030145154626832114386 0.015033303940854754813 -0.008790874150883712379 -0.070981779933133079541 0.017206627495283892404 -1.7122411655523179785 1.1147255274815186521 -0.014390025394810036091 0.13044143789097897845 -0.12279451183989324725 -0.12597682091334211352 -0.015300972066076078126 -0.054408281756339632595 -0.026687664905365521967 0.16626299615157713596;-0.020023322179635628937 0.8329659018159215611 2.1632911441574607103 -0.065404595883892718833 0.012456982815323916144 0.026957633564904968232 -0.0089593802514279872323 -0.024686674381263165601 0.05624167447834934469 -0.010660873038531493498 1.5127138666952193446 0.23017272318538012366 -0.025762436777470299615 0.00033534322755983880186 -0.076696454233261990296 0.046901191803379198297 -0.012473258136182399647 0.031912189336252727578 0.024843486261123655379 0.011884543684574611425;0.019319785844247660406 0.1380275047416866796 0.065230640967220351878 -0.024791794257111705868 -0.074660725459390633874 -0.052049080512621852257 0.031779995731749728638 -0.035519356443726314565 -1.6472788269494151869 0.042609004863162387722 0.10553882802713822342 0.048112595583847492242 -0.087100066855559904466 1.1041418440012524815 -0.034705492388396728953 0.31686016166133379457 0.0048822922929405571102 -0.57478823445262949843 -0.040001399472393985024 -0.20219807973047923544;-0.037851638925725988871 0.014658599788532731753 -0.0059892373980503579856 -0.013320862356668301818 0.030836040303400376328 0.033240925986608389764 -0.02017895680998635019 -0.00070022186567701412505 0.24937832150327635117 0.012409490467464697611 -0.03001951302706987873 -0.040398870349559412585 -0.022167193842967097134 -1.3774427891892662146 -0.081075323884758229709 -0.99802436014946138698 -0.0086881128906458222894 1.4840297060139753249 0.10328681773751398343 -0.22914231155566452958;-0.018676086958561956969 0.019144443277969581951 -0.0029994836458433395826 0.0083559407899716480611 0.015552335955474481249 0.023112334644733049938 -0.00010859081531341789606 -0.031157423111895937023 -1.816458081428430793 0.0094290462162994262418 -0.012021047675898068399 -0.059669643652985514259 -0.018959561617735494476 -0.97105540164033055106 -0.095983792130144893195 -1.241251951316122204 -0.0094785793940650626965 -0.79474796097455979726 0.094339282234330398835 -0.12191868260045821137;-0.024720524265899247729 -9.5253621770700468846e-05 -0.0042782625956169582221 -0.020287493002395063507 0.01971854385824621525 0.015926543493290694353 -0.021076319602567297751 0.022972726589424296434 1.6389760955842886947 0.0048630194939843201379 -0.022064452295695813344 0.0036098735906037134925 -0.0077485719660242832404 -0.67633919543001064234 -0.010856360595416942108 -0.080070345679768312186 -0.0019132071510096838093 2.1295024354959082302 0.033532097223591732227 -0.14197432588755287686];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0145461894160441;0.0120496516598144;0.0150741231249022;0.0148630982981727;0.0170326277881388;0.0139327839788853;0.0158142623094674;0.015416547835459;0.0143220888382999;0.0104822416804629;0.01545275445276;0.0174997027282986;0.0143444015654816;0.0103259149958399;0.015784537360079;0.0145613611304411;0.0177885202842552;0.0130662383228639;0.0176478843814202;0.0134209454899449];
y1_step1.xoffset = [-54.5431004076857;0.0272591847341772;9.88240864853446e-06;4.0504797307406e-05;-47.9895447498484;0.00341071900532491;2.61463377471746e-05;2.47688303952351e-06;-44.734627991229;0.0173569510471801;5.69166789208495e-05;5.7270795528053e-08;-47.3006397094675;0.00294708307070013;3.13515648310557e-06;0.000361974854669706;-41.241760866089;0.00998683018885141;2.77393742657931e-05;7.81278705384214e-07];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
